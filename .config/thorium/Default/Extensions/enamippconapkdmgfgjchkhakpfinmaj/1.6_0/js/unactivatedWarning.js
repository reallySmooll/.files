(()=>{"use strict";var e={8362:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{a(o.next(e))}catch(e){i(e)}}function c(e){try{a(o.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,c)}a((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.isFirefoxOrSafari=t.timeoutPomise=t.PromiseTimeoutError=t.objectToURI=t.waitFor=void 0,t.waitFor=function(e,t=5e3,o=100,r){return n(this,void 0,void 0,(function*(){return yield new Promise(((n,i)=>{setTimeout((()=>{clearInterval(c),i(`TIMEOUT: ${Error().stack}`)}),t);const s=()=>{const t=e();(r?r(t):t)&&(n(t),clearInterval(c))},c=setInterval(s,o);s()}))}))},t.objectToURI=function(e,t,n){let o=0;for(const r in t){const i=e.includes("?")||o>0?"&":n?"?":"",s="string"==typeof t[r]?t[r]:JSON.stringify(t[r]);e+=i+encodeURIComponent(r)+"="+encodeURIComponent(s),o++}return e};class o extends Error{constructor(e){super("Promise timed out"),this.promise=e}}t.PromiseTimeoutError=o,t.timeoutPomise=function(e){return new Promise(((t,n)=>{e&&setTimeout((()=>{n(new o)}),e)}))},t.isFirefoxOrSafari=function(){return"undefined"!=typeof browser}},2990:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.cleanPage=void 0,t.cleanPage=function(){if("complete"===document.readyState)for(const e of document.querySelectorAll(".cbShowOriginal, .cb-css, #cbSubmitMenu, .cbTitleButtonContainer, .cbCustomThumbnailCanvas, #dearrow-unactivated-warning"))e.remove()}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}(()=>{const e=n(8362),t=n(2990);if((0,e.isFirefoxOrSafari)()){(0,t.cleanPage)();const e=document.querySelectorAll("img");for(const t of e)"none"===t.style.display&&t.style.removeProperty("display")}let o=document.getElementById("dearrow-unactivated-warning");function r(){chrome.storage.sync.get(["activated","freeTrialStart","freeTrialEnded","freeAccessRequestStart"],(e=>{if(!(e.activated||e.freeTrialStart||e.freeTrialEnded||e.freeAccessRequestStart)){const e=()=>{o=document.createElement("div"),o.id="dearrow-unactivated-warning",o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.right="0",o.style.display="flex",o.style.alignItems="center",o.style.justifyContent="center",o.style.flexDirection="column",o.style.backgroundColor="#171717",o.style.zIndex="10000000",o.style.padding="20px";const e=document.createElement("img");e.src=chrome.runtime.getURL("icons/logo.svg"),e.style.width="30px";const t=document.createElement("span");t.innerText=chrome.i18n.getMessage("DeArrowNotActivated"),t.style.color="white",t.style.fontSize="17px",t.style.padding="20px";const n=i(chrome.i18n.getMessage("ActivateDeArrow"));n.addEventListener("click",(()=>{chrome.runtime.sendMessage({message:"openPayment"})}));const r=i(chrome.i18n.getMessage("Close"));r.addEventListener("click",s),o.appendChild(e),o.appendChild(t),o.appendChild(n),o.appendChild(r),document.body.appendChild(o),chrome.storage.sync.onChanged.addListener((e=>{(e.activated||e.freeTrialStart||e.freeTrialEnded||e.freeAccessRequestStart)&&s()}))};"complete"===document.readyState?e():window.addEventListener("DOMContentLoaded",e)}}))}function i(e){const t=document.createElement("div");return t.innerText=e,t.style.cursor="pointer",t.style.backgroundColor="#0e79ca",t.style.color="white",t.style.padding="10px",t.style.borderRadius="5px",t.style.fontSize="14px",t.style.width="max-content",t.style.marginBottom="10px",t}function s(){o&&(o.remove(),o=null)}s(),document.hasFocus()?r():window.addEventListener("mousemove",r,{once:!0})})()})();